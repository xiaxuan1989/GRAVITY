\documentclass[border=3pt,tikz]{standalone}
\usepackage{amsmath} % for \text
\usepackage{etoolbox} % ifthen
\usepackage[outline]{contour} % glow around text
\usetikzlibrary{calc} % for adding up coordinates
\usetikzlibrary{decorations.markings,decorations.pathmorphing}
\usetikzlibrary{angles,quotes} % for pic (angle labels)
\usetikzlibrary{arrows.meta} % for arrow size
\usepackage{xfp} % higher precision (16 digits?)
\contourlength{1.1pt}

\tikzset{>=latex} % for LaTeX arrow head
\colorlet{myred}{red!85!black}
\colorlet{myblue}{blue!80!black}
\colorlet{mygreen}{green!80!black}
\colorlet{mydarkred}{red!55!black}
\colorlet{mylightred}{red!85!black!12}
\colorlet{myfieldred}{mydarkred!5} % for S' background
\colorlet{mydarkblue}{blue!50!black}
\colorlet{mylightblue}{blue!50!black!30}
\colorlet{mylightblue2}{myblue!10}
\colorlet{mypurple}{blue!40!red!80!black}
\colorlet{mydarkgreen}{green!50!black}
\colorlet{mydarkpurple}{blue!40!red!50!black}
\colorlet{myorange}{orange!40!yellow!95!black}
\colorlet{mydarkorange}{orange!40!yellow!85!black}
\colorlet{mybrown}{brown!20!orange!90!black}
\colorlet{mydarkbrown}{brown!20!orange!55!black}
\tikzstyle{world line}=[myblue!40,line width=0.3]
\tikzstyle{world line t}=[mypurple!50!myblue!40,line width=0.3]
\tikzstyle{world line'}=[mydarkred!40,line width=0.3]
\tikzstyle{mysmallarr}=[-{Latex[length=3,width=2]},thin]
\tikzstyle{mydashed}=[dash pattern=on 3 off 3]
\tikzstyle{rod}=[mydarkbrown,draw=mydarkbrown,double=mybrown,double distance=2pt,
                 line width=0.2,line cap=round,shorten >=1pt,shorten <=1pt]
\tikzstyle{vector}=[->,line width=1,line cap=round]
\tikzstyle{vector'}=[vector,shorten >=1.2]
\tikzstyle{particle}=[mygreen,line width=0.9]
\tikzstyle{photon}=[-{Latex[length=5,width=4]},myorange,line width=0.8,decorate,
                    decoration={snake,amplitude=1.0,segment length=5,post length=5}]

\def\tick#1#2{\draw[thick] (#1) ++ (#2:0.06) --++ (#2-180:0.12)}
\def\tickp#1#2{\draw[thick,mydarkred] (#1) ++ (#2:0.06) --++ (#2-180:0.12)}
\def\Nsamples{100} % number samples in plot


\begin{document}

\pgfdeclarelayer{back} % to draw on background
\pgfsetlayers{back,main} % set order
\def\xmin{0.23}
\def\xmax{2}
\def\Nlines{6} % number of world lines (at constant x/t)
\def\DNxp{0}   % difference in number of world lines of x' axis
\def\DNyp{0}   % difference in number of world lines of ct' axis
\def\DNy{0}    % difference in number of world lines of ct axis
\def\ang{20}   % angle between x and x' axes
\def\xplabelang{180} % anchor angle of x' axis label
%\pgfmathsetmacro\ang{atan(0.44)} % angle between x and x' axes
\def\axes{
  \pgfmathsetmacro\d{\xmax/(\Nlines+0.4)} % grid size
  \pgfmathsetmacro\D{\d/cos(\ang)/sqrt(1-tan(\ang)^2)} % grid size, boosted
  \pgfmathsetmacro\ymax{\xmax+\DNy*\d} % maximum of y = ct axis
  \pgfmathsetmacro\xmaxp{(\xmax/\d+\DNxp)*\D} % maximum of x' axis
  \pgfmathsetmacro\ymaxp{(\xmax/\d+\DNyp)*\D} % maximum of y' = ct' axis
  \coordinate (O) at (0,0);
  \coordinate (X) at (\xmax+0.15,0);
  \coordinate (T) at (0,\ymax+0.15);
  \coordinate (X') at (\ang:\xmaxp+0.2);
  \coordinate (T') at (90-\ang:\ymaxp+0.2);
  
  % FILL
  \begin{pgfonlayer}{back} % draw on back
    \fill[myfieldred]
      (O) --++ (\ang:\xmaxp) --++ (90-\ang:\ymaxp) --++ (\ang:-\xmaxp) -- cycle;
  \end{pgfonlayer}
  
  % WORLD LINE GRID
  \message{  Making world lines...^^J}
  \pgfmathsetmacro\Nylines{\Nlines+\DNy} % number of world lines at constant ct'
  \foreach \i [evaluate={\x=\i*\d;}] in {1,...,\Nlines}{
    %\message{  Running i/N=\i/\Nlines, x=\x...^^J}
    \draw[world line]   (\x,0) -- (\x,\ymax);
  }
  \foreach \i [evaluate={\t=\i*\d;}] in {1,...,\Nylines}{
    %\message{  Running i/N=\i/\Nlines, t=\t...^^J}
    \draw[world line t] (0,\t) -- (\xmax,\t);
  }
  
  % BOOSTED WORLD LINE GRID
  \message{  Making world lines for boosted frame...^^J}
  \pgfmathsetmacro\Nxplines{\Nlines+\DNxp} % number of world lines at constant x'
  \pgfmathsetmacro\Nyplines{\Nlines+\DNyp} % number of world lines at constant ct'
  \foreach \i [evaluate={\x=\i*\D;}] in {1,...,\Nxplines}{
    %\message{  Running i/N=\i/\Nlines, x=\x...^^J}
    \draw[world line'] (\ang:\x) --++ (90-\ang:\ymaxp);
  }
  \foreach \i [evaluate={\t=\i*\D;}] in {1,...,\Nyplines}{
    %\message{  Running i/N=\i/\Nlines, t=\t...^^J}
    \draw[world line'] (90-\ang:\t) --++ (\ang:\xmaxp);
  }
  
  % AXES
  \draw[->,thick] (0,-\xmin) -- (T) node[left=-1] {$t$};
  \draw[->,thick] (-\xmin,0) -- (X) node[below=0] {$x$};
  \draw[->,thick,mydarkred] (90-\ang:-\xmin) -- (T')
    node[right=5,above=-1] {$t'$};
  \draw[->,thick,mydarkred] (\ang:-\xmin) -- (X')
    node[anchor=\xplabelang,inner sep=2] {$x'$};
}
\def\ang{23} % angle between x and x' axes
\begin{tikzpicture}[scale=1.8]
  \message{Length contraction (rod at rest in S)^^J}
  
  % AXES
  \def\Nlines{7} % number of world lines (at constant x/t)
  \axes
  
  % SETTINGS
  \pgfmathsetmacro\xA{2*\d} % triangle left corner x coordinate in S
  \pgfmathsetmacro\yA{4*\d} % triangle left corner y=ct coordinate in S
  \pgfmathsetmacro\Lz{4*\d} % proper/rest length L0 in S
  \pgfmathsetmacro\L{\Lz/cos(\ang)} % length L in S'
  \coordinate (L) at (\Lz,0); % rod end in S
  \coordinate (L') at (\ang:\L); % rod end in S'
  \coordinate (A) at (\xA,\yA); % point A in triangle
  \coordinate (B) at (\xA+\Lz,\yA); % point B in triangle
  \coordinate (B') at (\xA+\Lz,{\yA+\Lz*tan(\ang)}); % point B' in triangle
\draw[thick,samples=100,smooth,variable=\y,domain=-.7:.7]
    plot({sqrt((\xA+\Lz)^2+(\y)^2)},\y+\yA);
  
  
  % FILL
  \begin{pgfonlayer}{back} % draw on back
    \fill[mylightblue2] (\xA,-\xmin) rectangle (\xA+\Lz,\xmax);
  \end{pgfonlayer}
  \draw[->,thick,mydarkbrown] (\xA,-\xmin) --++ (0,\xmin+\xmax+0.2);
  \draw[->,thick,mydarkbrown] (\xA+\Lz,-\xmin) --++ (0,\xmin+\xmax+0.2);
  
  % ROD
  \draw[rod] (\xA,0) --++ (L)
    node[midway,below=-1] {$L$};
  \draw[rod] (\ang:{\xA/cos(\ang)}) --++ (L')
    node[pos=0.485,above=1] {\contour{mylightblue2}{$L'$}};
  
  % TRIANGLE
  \draw[very thick,myred,rounded corners=0.1]
    (A) -- (B') node[midway,above=0] {\contour{mylightblue2}{$\Delta x'$}}
        -- (B) node[midway,right=-2] {\contour{myfieldred}{$\Delta t$}}
        -- cycle node[pos=0.51,below=-1] {\contour{mylightblue2}{$\Delta x$}};
  %\fill[myfieldred] (A)++(185:0.089) circle(0.04);
  %\fill[mydarkred] (A) circle(0.03) node[below=1,left=-2.7] {A};
  
  \fill[mydarkred] (A) circle(0.03);
  \fill[mydarkred] (B) circle(0.03) ;
  \fill[mydarkred] (B') circle(0.03);

  
  
\end{tikzpicture}



\end{document}